From 866f469683a1cc99bb3adeee5b3eb07ec18a000c Mon Sep 17 00:00:00 2001
From: Vladimir Serbinenko <phcoder@gmail.com>
Date: Mon, 26 Jan 2015 09:54:14 +0100
Subject: [PATCH 237/506] util/getroot: Add missing grub_disk_close.

Found by: Coverity scan.
---
 util/getroot.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/util/getroot.c b/util/getroot.c
index 3958105..345d49b 100644
--- a/util/getroot.c
+++ b/util/getroot.c
@@ -417,7 +417,10 @@ grub_util_biosdisk_get_grub_dev (const char *os_dev)
 
     name = grub_util_get_ldm (disk, ctx.start);
     if (name)
-      return name;
+      {
+	grub_disk_close (disk);
+	return name;
+      }
 
     ctx.partname = NULL;
 
-- 
2.4.3

