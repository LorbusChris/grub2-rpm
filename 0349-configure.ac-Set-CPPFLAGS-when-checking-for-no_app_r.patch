From aa6ccc05c10df14bc39a6a7d9d928d8180e3ef79 Mon Sep 17 00:00:00 2001
From: Vladimir Serbinenko <phcoder@gmail.com>
Date: Tue, 3 Mar 2015 09:07:53 +0100
Subject: [PATCH 349/506] configure.ac: Set $CPPFLAGS when checking for
 no_app_regs.

Fixes compilation for sparc64 with clang.
---
 configure.ac | 1 +
 1 file changed, 1 insertion(+)

diff --git a/configure.ac b/configure.ac
index 908bb81..9e24d89 100644
--- a/configure.ac
+++ b/configure.ac
@@ -741,6 +741,7 @@ if test x"$target_cpu" = xsparc64 ; then
         break
       fi
       CFLAGS="$TARGET_CFLAGS $cand -Werror"
+      CPPFLAGS="$TARGET_CPPFLAGS"
       AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[]], [[]])],
 		        [grub_cv_target_cc_mno_app_regs="$cand"], [])
     done
-- 
2.4.3

