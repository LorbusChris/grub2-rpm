From f153fcb5a5863d7ce190cfc531b7dff1000316a0 Mon Sep 17 00:00:00 2001
From: Andrei Borzenkov <arvidjaar@gmail.com>
Date: Fri, 30 Jan 2015 20:31:20 +0300
Subject: [PATCH 274/506] test: consistently use TMPDIR and same name pattern
 for temp files

---
 tests/test_sha512sum.in | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tests/test_sha512sum.in b/tests/test_sha512sum.in
index 524c1d1..d5ef7f9 100644
--- a/tests/test_sha512sum.in
+++ b/tests/test_sha512sum.in
@@ -1,7 +1,7 @@
 #! /bin/bash
 
 # create a randome file
-file=`mktemp`
+file="`mktemp "${TMPDIR:-/tmp}/tmp.XXXXXXXXXX"`" || exit 1
 cat >$file <<EOF
 hello world!
 EOF
@@ -15,12 +15,12 @@ else
 fi
 
 
-outfile1=`mktemp`
+outfile1="`mktemp "${TMPDIR:-/tmp}/tmp.XXXXXXXXXX"`" || exit 1
 @builddir@/grub-shell --files=/boot/grub/file=$file >$outfile1 <<EOF
 sha512sum $grub_file
 EOF
 
-outfile2=`mktemp`
+outfile2="`mktemp "${TMPDIR:-/tmp}/tmp.XXXXXXXXXX"`" || exit 1
 sha512sum $file >$outfile2
 
 SHA1=`cat $outfile1 | tr -d '\n' | cut -f1 -d\ `
-- 
2.4.3

