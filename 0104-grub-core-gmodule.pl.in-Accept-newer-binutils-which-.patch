From 2988a849fcf9f7b3c9fca94a4b1cd5913ca4c912 Mon Sep 17 00:00:00 2001
From: Vladimir Serbinenko <phcoder@gmail.com>
Date: Sun, 21 Sep 2014 18:23:23 +0200
Subject: [PATCH 104/506] 	* grub-core/gmodule.pl.in: Accept newer
 binutils which output 	empty column rather than 0x0.

---
 ChangeLog               | 5 +++++
 grub-core/gmodule.pl.in | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/ChangeLog b/ChangeLog
index bac248c..163265b 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,8 @@
+2014-09-21  Vladimir Serbinenko  <phcoder@gmail.com>
+
+	* grub-core/gmodule.pl.in: Accept newer binutils which output
+	empty column rather than 0x0.
+
 2014-09-21  Michael Chang  <mchang@suse.com>
 
 	* grub-core/osdep/unix/config.c: Remove extraneous comma.
diff --git a/grub-core/gmodule.pl.in b/grub-core/gmodule.pl.in
index 6739a6f..78aa1e6 100644
--- a/grub-core/gmodule.pl.in
+++ b/grub-core/gmodule.pl.in
@@ -23,7 +23,7 @@ while (<>) {
 		}
 
 		print " -s $2 $sections{$1}"
-			if ($sections{$1} ne '0x0');
+			if ($sections{$1} ne '0x0' and $sections{$1} ne '');
 	};
 	close (READELF);
 	print "\n";
-- 
2.4.3

